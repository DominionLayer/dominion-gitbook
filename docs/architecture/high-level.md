# High-Level Architecture

## System Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           EXTERNAL WORLD                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │
│  │ Price   │  │ News    │  │ Social  │  │ Chain   │  │ Oracle  │       │
│  │ Feeds   │  │ APIs    │  │ Media   │  │ Events  │  │ Data    │       │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘       │
└───────│────────────│────────────│────────────│────────────│─────────────┘
        │            │            │            │            │
        └────────────┴────────────┼────────────┴────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         OBSERVATION LAYER                                │
│                                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                   │
│  │   Watcher    │  │   Watcher    │  │   Watcher    │                   │
│  │   Agent 1    │  │   Agent 2    │  │   Agent N    │                   │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘                   │
│         │                 │                 │                            │
│         └─────────────────┼─────────────────┘                            │
│                           │                                              │
│                           ▼                                              │
│                    ┌──────────────┐                                      │
│                    │ Observation  │                                      │
│                    │    Queue     │                                      │
│                    └──────┬───────┘                                      │
└─────────────────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         ANALYSIS LAYER                                   │
│                                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                   │
│  │   Analyst    │  │   Analyst    │  │   Analyst    │                   │
│  │   Agent 1    │  │   Agent 2    │  │   Agent N    │                   │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘                   │
│         │                 │                 │                            │
│         │     ┌───────────┴───────────┐     │                            │
│         │     │      LLM Gateway      │     │                            │
│         │     │   (OpenAI/Anthropic)  │     │                            │
│         │     └───────────────────────┘     │                            │
│         │                                   │                            │
│         └─────────────────┬─────────────────┘                            │
│                           ▼                                              │
│                    ┌──────────────┐                                      │
│                    │   Analysis   │                                      │
│                    │   Results    │                                      │
│                    └──────┬───────┘                                      │
└─────────────────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                       COORDINATION LAYER                                 │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐     │
│  │                    PREDICTION MARKETS                           │     │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │     │
│  │  │Market 1 │  │Market 2 │  │Market 3 │  │Market N │           │     │
│  │  │ P=0.65  │  │ P=0.42  │  │ P=0.78  │  │ P=0.51  │           │     │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘           │     │
│  └────────────────────────────────────────────────────────────────┘     │
│                           │                                              │
│                           ▼                                              │
│                    ┌──────────────┐                                      │
│                    │ Coordinator  │                                      │
│                    │    Agent     │                                      │
│                    └──────┬───────┘                                      │
└─────────────────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        APPROVAL LAYER                                    │
│                                                                          │
│         ┌──────────────┐                ┌──────────────┐                 │
│         │   Proposal   │ ────────────── │   Auditor    │                 │
│         │    Queue     │                │    Agent     │                 │
│         └──────┬───────┘                └──────────────┘                 │
│                │                                                         │
│                ▼                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                      APPROVAL GATES                               │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐             │   │
│  │  │ Policy  │  │  Risk   │  │  Human  │  │Governor │             │   │
│  │  │  Check  │  │  Check  │  │ Review  │  │ Sign-off│             │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘             │   │
│  └──────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
                            │
                            ▼ (Approved only)
┌─────────────────────────────────────────────────────────────────────────┐
│                        EXECUTION LAYER                                   │
│                                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                   │
│  │   Executor   │  │   Executor   │  │   Executor   │                   │
│  │   Agent 1    │  │   Agent 2    │  │   Agent N    │                   │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘                   │
│         │                 │                 │                            │
│         └─────────────────┼─────────────────┘                            │
│                           ▼                                              │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                      EXECUTION TARGETS                            │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐             │   │
│  │  │Dominion │  │  Base   │  │External │  │  File   │             │   │
│  │  │   L3    │  │   L2    │  │  APIs   │  │ System  │             │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘             │   │
│  └──────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

## Component Interactions

### Watcher → Analyst
Watchers push observations to a queue. Analysts pull and process.

### Analyst → Market
Analysts express beliefs by trading in prediction markets.

### Market → Coordinator
Coordinators read market prices to understand swarm consensus.

### Coordinator → Approval
Coordinators generate proposals that enter the approval pipeline.

### Approval → Executor
Only approved proposals reach executors.

### Executor → Audit
All executions are logged for audit.

## Deployment Topology

```
┌─────────────────────────────────────────────────────────────┐
│                    CLOUD INFRASTRUCTURE                      │
│                                                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   Gateway   │  │   Service   │  │  Database   │         │
│  │   Cluster   │  │   Cluster   │  │   Cluster   │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                              │
└─────────────────────────────────────────────────────────────┘
         │                   │                   │
         └───────────────────┼───────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────┐
│                    DOMINION L3 NETWORK                       │
│                                                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  Sequencer  │  │  Validator  │  │  Validator  │         │
│  │   (Primary) │  │     Node    │  │     Node    │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

